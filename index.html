
<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GPS æ‰“å¡ç³»çµ±</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#4285f4">
  <style>
    body { font-family: Arial, sans-serif; padding: 1em; background: #f5f7fa; }
    h2 { color: #2c3e50; }
    select, button, input { font-size: 1em; margin: 0.5em 0; padding: 0.5em; width: 100%; max-width: 300px; }
    .status { margin-top: 1em; font-size: 1.1em; }
  </style>
</head>
<body>
  <h2>ğŸ“ GPS æ‰“å¡ç³»çµ±</h2>
  <label>æ‰“å¡äººå“¡ï¼š</label><br>
  <select id="name">
    <option value="LiXiaoHua">Li Xiao Hua</option>
    <option value="PengGuoShun">Peng Guo Shun</option>
    <option value="XuGongYun">Xu Gong Yun</option>
  </select><br>

  <label>å·¥ä½œåœ°é»ï¼š</label><br>
  <select id="location">
    <option value="#369 Okuku Aftercare">#369 Okuku Aftercare</option>
    <option value="#367 Panbrook Pharmacy">#367 Panbrook Pharmacy</option>
    <option value="#362 Rehab Lounge">#362 Rehab Lounge</option>
    <option value="#360 BELTLINE">#360 BELTLINE</option>
    <option value="#358 Maulik">#358 Maulik</option>
    <option value="#356 NIWE">#356 NIWE</option>
  </select><br>

  <label>å‚™è¨» (Note)ï¼š</label><br>
  <input type="text" id="note" placeholder="å¦‚éœ€æ‰‹å‹•ä¿®æ”¹ï¼Œè«‹è¼¸å…¥åŸå› "><br>

  <button onclick="checkIn()">Check In</button>
  <button onclick="checkOut()">Check Out</button>
  <button onclick="manualEntry()">Manual Entry</button>
  <p class="status" id="status">è«‹é¸æ“‡æ‰“å¡æ–¹å¼</p>

  <script>
    const API_URL = "https://script.google.com/macros/s/NEW_DEPLOYMENT_ID/exec";

    function sendData(type) {
      document.getElementById('status').textContent = "â³ æ­£åœ¨å–å¾— GPS ä½ç½®...";
      if (!navigator.geolocation) {
        document.getElementById('status').textContent = "âŒ æ­¤ç€è¦½å™¨ä¸æ”¯æ´ GPS";
        return;
      }
      navigator.geolocation.getCurrentPosition(
        position => {
          const lat = position.coords.latitude;
          const lng = position.coords.longitude;
          const name = document.getElementById('name').value;
          const location = document.getElementById('location').value;
          const note = document.getElementById('note').value;
          const url = `${API_URL}?name=${encodeURIComponent(name)}&location=${encodeURIComponent(location)}&lat=${lat}&lng=${lng}&type=${type}&note=${encodeURIComponent(note)}`;
          fetch(url).then(res => res.text()).then(txt => {
            document.getElementById('status').textContent = txt;
          }).catch(err => {
            document.getElementById('status').textContent = "âŒ ç™¼é€å¤±æ•—ï¼š" + err;
          });
        },
        err => {
          document.getElementById('status').textContent = "âŒ ç„¡æ³•å–å¾— GPSï¼š" + err.message;
        }
      );
    }
    function checkIn() { sendData('checkin'); }
    function checkOut() { sendData('checkout'); }
    function manualEntry() { sendData('manual'); }
  </script>
</body>
</html>
